<!-- conent that is shwoing on the screen -->
<% layout("layouts/boilerplate")%>


 <!-- <h1>All Listings</h1>   -->
 <div class="category-bar">
  <a class="category-item" href="/listings">
    <i class="bi bi-compass"></i>
    <span>Explore</span>
  </a>


  <a class="category-item" href="/listings?category=beach">
    <i class="bi bi-water"></i>
    <span>Beach</span>
  </a>

  <a class="category-item" href="/listings?category=city">
    <i class="bi bi-building"></i>
    <span>City</span>
  </a>

  <a class="category-item" href="/listings?category=nature">
    <i class="bi bi-tree"></i>
    <span>Nature</span>
  </a>

  <a class="category-item" href="/listings?category=luxury">
    <i class="bi bi-gem"></i>
    <span>Luxury</span>
  </a>
    <a class="category-item" href="/listings?category=popular">
    <i class="bi bi-stars"></i>
    <span>Popular</span>
  </a>

  <a class="category-item" href="/listings?category=heritage">
    <i class="bi bi-bank"></i>
    <span>Heritage</span>
  </a>

  <a class="category-item" href="/listings?category=farm">
    <i class="bi bi-house-heart"></i>
    <span>Farm Stay</span>
  </a>
 
  
<a class="category-item" href="/listings?category=budget">
  <i class="bi bi-cash-coin"></i>
  <span>Budget</span>
</a>

<a class="category-item" href="/listings?category=family">
  <i class="bi bi-people"></i>
  <span>Family</span>
</a>

<a class="category-item" href="/listings?category=work">
  <i class="bi bi-laptop"></i>
  <span>Work</span>
</a>



<% if (curruser) { %>
  <a class="category-item" href="/bookings">
    <i class="bi bi-calendar-check"></i>
    <span>Bookings</span>
  </a>
<% } %>

  <div class="tax-toggle">
<div class="form-check-reverse form-switch ">
  <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
  <label class="form-check-label" for="switchCheckDefault"> after taxes</label>
</div>
    
  </div>
</div>

 <!-- <form  method="get" action="/listings/new">
    <button>Create New Listing

 </button></form> -->
 <!-- trying to print the title for of lists in data -->
   <!--  used for  to print  onluy output  -->

   <!-- to set no of card in small md and largw -->
<div class="row row-cols-1 row-cols-md-3 g-4">
  <% for(let listing of allListings){ %>
  
   <!-- on clicking cards u go to direct on details  -->
  <div class="col">
      <div class="card" style="margin:10px; position: relative;">
          <a href="/listings/<%= listing._id %>" class ="Listing-link">
<div class="image-wrapper"> <img 
          class="card-img-top" 
          style="height:20rem;" 
          src="<%= listing.image?.url || listing.image || 'https://images.unsplash.com/photo-1722612222199-02fee4b61370?auto=format&fit=crop&q=80&w=387' %>"
          alt="listing"
        />
        <div class="card-image-overlay"></div></div>
       

        <div class="card-body">
          <h5 class="card-title"><b><%= listing.title %></b></h5>
          
        </div>
        <p class="card-text">
  <%= listing.description.length > 70
      ? listing.description.slice(0, 70) + "..."
      : listing.description %>

      
<% if (listing.description.length > 70) { %>
  <a class="card-body" href="/listings/<%= listing._id %>"> <i class="bi bi-box-arrow-up-right ms-1"></i>

    
  </a>
<% } %>

</p>

       


        <ul class="list-group list-group-flush">
          <li class="list-group-item">â‚¹ <%= listing.price ? Number(listing.price).toLocaleString("en-IN") : "N/A" %> / Night
<i  class = "tax-info" hidden> &nbsp; &nbsp; &nbsp;   &nbsp;+18% gst</i>
</li>

        </ul>
</a>
        <div class="card-body">
          <a href="/listings/<%= listing._id %>" class="card-link">See Details</a>
          <a href="/listings/<%= listing._id %>/booknow" class="card-link">Book Now</a>
        </div>
      </div>
    </div>

  
  <% } %>
</div>

  
  <script>
  const switchToggle = document.getElementById("switchCheckDefault");

  switchToggle.addEventListener("change", () => {
    const taxinfo = document.getElementsByClassName("tax-info");

    for (let info of taxinfo) {
      info.hidden = !switchToggle.checked;
    }
  });
</script>







